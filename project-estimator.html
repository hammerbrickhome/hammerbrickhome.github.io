<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Project Estimator â€” Hammer Brick & Home LLC</title>
  <meta name="description" content="NYC & NJ home improvement estimate calculator for transparent ballpark pricing.">
  <link rel="icon" href="images/hero.PNG">
  <link rel="stylesheet" href="style.css">

  <style>
    .estimator-grid{
      display:grid;
      grid-template-columns:minmax(0,1.1fr) minmax(0,1fr);
      gap:18px;
      max-width:980px;
      margin:18px auto 0;
      align-items:flex-start;
    }
    @media (max-width:840px){
      .estimator-grid{grid-template-columns:1fr;}
    }
    .est-card{
      border:1px solid rgba(231,191,99,.35);
      border-radius:8px;
      padding:16px 18px 18px;
      background:rgba(5,12,25,.9);
      box-shadow:0 14px 36px rgba(0,0,0,.55);
    }
    .field-row{margin-bottom:12px;}
    .field-row label{
      display:block;
      font-size:13px;
      font-weight:600;
      letter-spacing:.2px;
      margin-bottom:4px;
      color:#ccc;
    }
    .field-row input,
    .field-row select{
      width:100%;
      padding:8px 10px;
      border-radius:8px;
      border:1px solid rgba(231,191,99,.4);
      background:rgba(6,12,24,.95);
      color:#fff;
      font-size:14px;
    }
    .field-row.two-col{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
      gap:10px;
    }
    .tiny-note{
      font-size:11px;
      margin-top:6px;
      color:#aaa;
    }
    .est-main{
      font-size:24px;
      font-weight:800;
      color:#e7bf63;
      margin:8px 0 6px;
    }
    .est-note{
      font-size:13px;
      color:#ccc;
      margin-bottom:10px;
    }
    .est-legal{
      font-size:11px;
      color:#bbb;
      line-height:1.5;
    }
    .btn-email-est{
      display:inline-block;
      margin-top:10px;
      padding:10px 14px;
      border-radius:10px;
      background:#e7bf63;
      color:#000;
      font-weight:700;
      text-align:center;
    }
    .muted{
      color:var(--muted);
      font-size:13px;
    }
    /* Advanced option grouping labels */
    .adv-label{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:rgba(231,191,99,.9);
      margin-bottom:2px;
    }
    .adv-subnote{
      font-size:11px;
      color:#999;
      margin-top:4px;
    }
  </style>
</head>

<body>
  <!-- HEADER INCLUDE -->
  <div id="header-include"></div>

  <main class="page">
    <section class="hero hero-inner fade-up">
      <div class="hero-content">
        <h1>Project Estimator</h1>
        <p>Get an NYC/NJ ballpark range in seconds. A final quote is only issued after an on-site walkthrough.</p>
      </div>
    </section>

    <section class="section fade-up" id="estimator">
      <h2>NYC &amp; NJ Project Estimator (Ballpark Only)</h2>
      <p class="muted" style="max-width:800px;margin:auto;">
        This tool gives a rough NYC-area ballpark range based on typical labor and material trends.
        Final pricing is only provided in a written estimate after we inspect access, existing conditions, and finish selections.
      </p>

      <div class="estimator-grid">
        <!-- LEFT: FORM -->
        <form id="est-form" class="est-card">
          <div class="field-row">
            <label for="est-service">Project Type</label>
            <select id="est-service" required>
              <option value="masonry">Masonry Â· Pavers Â· Concrete</option>
              <option value="driveway">Driveway / Parking Area</option>
              <option value="roofing">Roofing â€“ Shingle / Flat</option>
              <option value="siding">Siding â€“ Exterior</option>
              <option value="windows">Windows &amp; Exterior Doors</option>
              <option value="interior-paint">Interior Painting</option>
              <option value="exterior-paint">Exterior Facade / Painting</option>
              <option value="bathroom">Bathroom Remodel</option>
              <option value="kitchen">Kitchen Remodel</option>
              <option value="basement">Basement Finishing</option>
              <option value="deck">Deck / Patio Build or Rebuild</option>
              <option value="fence">Fence Install / Replacement</option>
              <option value="handyman">Small Repairs / Handyman Visit</option>
            </select>
          </div>

          <div class="field-row">
            <label for="est-borough">Project Location</label>
            <select id="est-borough" required>
              <option value="staten-island" selected>Staten Island</option>
              <option value="brooklyn">Brooklyn</option>
              <option value="queens">Queens</option>
              <option value="manhattan">Manhattan</option>
              <option value="bronx">Bronx</option>
              <option value="nj">New Jersey (select towns)</option>
            </select>
          </div>

          <div class="field-row">
            <label for="est-building">Building Type</label>
            <select id="est-building" required>
              <option value="house" selected>1â€“2 Family House / Townhouse</option>
              <option value="small-multi">Small Multi-Family (2â€“4 units)</option>
              <option value="coop-condo">Co-op / Condo (Elevator / Doorman)</option>
              <option value="mixed">Mixed-Use / Commercial Front</option>
            </select>
          </div>

          <div class="field-row" id="est-size-row">
            <label for="est-size" id="est-size-label">Approx. size (sq. ft.)</label>
            <input id="est-size" type="number" min="1" step="1" placeholder="e.g., 350">
          </div>

          <div class="field-row" id="est-scope-row">
            <label for="est-scope">Scope Level</label>
            <select id="est-scope">
              <option value="">Select scopeâ€¦</option>
              <!-- options populated by JS -->
            </select>
          </div>

          <div class="field-row two-col">
            <div>
              <label for="est-finish">Finish Level</label>
              <select id="est-finish">
                <option value="standard">Standard</option>
                <option value="premium" selected>Premium</option>
                <option value="luxury">Luxury</option>
              </select>
            </div>
            <div>
              <label for="est-urgency">Timeline</label>
              <select id="est-urgency">
                <option value="flex">Flexible (2â€“3+ months)</option>
                <option value="soon" selected>Soon (4â€“8 weeks)</option>
                <option value="rush">Rush (&lt; 4 weeks)</option>
              </select>
            </div>
          </div>

          <div class="field-row">
            <label for="est-lead">Pre-1978 / lead-sensitive?</label>
            <select id="est-lead">
              <option value="no" selected>No / 1978 or newer / tested negative</option>
              <option value="yes">Yes / Unsure (we assume lead-safe practices)</option>
            </select>
          </div>

          <!-- ======================
               ADVANCED: MASONRY / DRIVEWAY
          ======================= -->
          <div class="field-row" id="adv-masonry" style="display:none;">
            <div class="adv-label">Masonry / Driveway Details</div>
            <label for="masonry-focus">Masonry focus</label>
            <select id="masonry-focus">
              <option value="walk-steps">Walkway / Steps / Landing</option>
              <option value="patio-wall">Patio / Retaining Wall</option>
              <option value="driveway" selected>Driveway / Parking Area</option>
            </select>

            <div id="adv-driveway-extra" style="margin-top:8px;">
              <label for="drive-existing">Existing driveway material</label>
              <select id="drive-existing">
                <option value="asphalt">Old asphalt</option>
                <option value="concrete">Old concrete</option>
                <option value="pavers">Old pavers / stone</option>
                <option value="dirt">No driveway (grass / dirt)</option>
              </select>

              <label for="drive-remove" style="margin-top:8px;">Removal / demo needed?</label>
              <select id="drive-remove">
                <option value="none">No, keep most of existing base</option>
                <option value="partial">Partial tear-out / patch</option>
                <option value="full">Full tear-out &amp; disposal</option>
              </select>

              <label for="drive-access" style="margin-top:8px;">Access</label>
              <select id="drive-access">
                <option value="standard">Standard front driveway</option>
                <option value="tight">Tight access / alley</option>
                <option value="cityrow">City row-house / limited parking</option>
              </select>
              <p class="adv-subnote">
                Driveway demo + disposal and tight access can add significant cost for machinery, labor, and carting.
              </p>
            </div>
          </div>

          <!-- ======================
               ADVANCED: ROOFING
          ======================= -->
          <div class="field-row" id="adv-roof" style="display:none;">
            <div class="adv-label">Roofing Details</div>
            <label for="roof-tearoff">Tear-off / existing layers</label>
            <select id="roof-tearoff">
              <option value="0">Overlay / minimal tear-off</option>
              <option value="1" selected>1 existing layer to remove</option>
              <option value="2">2 layers to remove</option>
              <option value="3">3+ layers / heavy demo</option>
            </select>

            <label for="roof-pitch" style="margin-top:8px;">Roof pitch / slope</label>
            <select id="roof-pitch">
              <option value="low">Flat / low-slope</option>
              <option value="medium" selected>Standard pitch</option>
              <option value="steep">Steep / difficult</option>
            </select>

            <label for="roof-height" style="margin-top:8px;">Building height</label>
            <select id="roof-height">
              <option value="low" selected>1â€“2 stories</option>
              <option value="mid">3 stories</option>
              <option value="high">4+ stories / difficult access</option>
            </select>

            <p class="adv-subnote">
              Extra layers, steep pitch, and higher buildings increase labor, protection, and safety setup.
            </p>
          </div>

          <!-- ======================
               ADVANCED: SIDING
          ======================= -->
          <div class="field-row" id="adv-siding" style="display:none;">
            <div class="adv-label">Siding Details</div>
            <label for="siding-remove">Existing siding to remove</label>
            <select id="siding-remove">
              <option value="vinyl">Vinyl / aluminum</option>
              <option value="wood">Wood clapboard / shakes</option>
              <option value="stucco">Stucco / EIFS (partial demo)</option>
            </select>

            <label for="siding-stories" style="margin-top:8px;">Number of stories</label>
            <select id="siding-stories">
              <option value="1">1 story</option>
              <option value="2" selected>2 stories</option>
              <option value="3">3+ stories</option>
            </select>
          </div>

          <!-- ======================
               ADVANCED: WINDOWS / DOORS
          ======================= -->
          <div class="field-row" id="adv-windows" style="display:none;">
            <div class="adv-label">Windows &amp; Doors</div>

            <label for="window-count">Window openings (total)</label>
            <input id="window-count" type="number" min="1" step="1" placeholder="e.g., 8">

            <label for="door-count" style="margin-top:8px;">Exterior doors (front/back/patio)</label>
            <input id="door-count" type="number" min="0" step="1" placeholder="e.g., 2">

            <label for="window-brand" style="margin-top:8px;">Preferred window line</label>
            <select id="window-brand">
              <option value="bella">Bella</option>
              <option value="andersen">Andersen</option>
              <option value="pella">Pella</option>
              <option value="builder">Builder-grade / other</option>
            </select>

            <label for="window-style" style="margin-top:8px;">Style / look</label>
            <select id="window-style">
              <option value="standard">Standard</option>
              <option value="modern">Modern slim-frame</option>
              <option value="italian">Italian / European-style</option>
            </select>

            <p class="adv-subnote">
              Italian / European-style and premium brands usually land higher per opening than builder-grade vinyl.
            </p>
          </div>

          <!-- ======================
               ADVANCED: DESIGN STYLE (KITCHEN/BATH)
          ======================= -->
          <div class="field-row" id="adv-style" style="display:none;">
            <div class="adv-label">Design Style</div>
            <label for="design-style">Overall style</label>
            <select id="design-style">
              <option value="standard">Standard American</option>
              <option value="modern">Modern / Minimal</option>
              <option value="italian">Italian Luxury / European</option>
            </select>
            <p class="adv-subnote">
              Italian luxury and high-end European finishes usually require higher budgets for tile, fixtures, and millwork.
            </p>
          </div>

          <!-- ADD-ONS -->
          <div class="field-row">
            <label for="est-dumpster">Dumpster Needed?</label>
            <select id="est-dumpster">
              <option value="0">No dumpster</option>
              <option value="500">Small (10 yd) â€” approx. $500</option>
              <option value="800">Medium (15 yd) â€” approx. $800</option>
              <option value="1200">Large (20 yd) â€” approx. $1,200</option>
            </select>
          </div>

          <div class="field-row">
            <label for="est-demo">Demolition Level</label>
            <select id="est-demo">
              <option value="0">No / very light demo</option>
              <option value="650">Light Demo â€” approx. $650</option>
              <option value="1200">Medium Demo â€” approx. $1,200</option>
              <option value="2200">Heavy Demo â€” approx. $2,200</option>
            </select>
          </div>

          <div class="field-row">
            <label for="est-permit">DOB Permit / Filing</label>
            <select id="est-permit">
              <option value="0">No permit / filing in this tool</option>
              <option value="850">Minor Work Permit â€” approx. $850</option>
              <option value="1600">Alteration / Larger Filing â€” approx. $1,600</option>
            </select>
            <p class="tiny-note">
              Actual filing costs and professional fees (architect/engineer, expeditor) vary by project and are confirmed in your written estimate.
            </p>
          </div>

          <button type="submit" class="btn">Calculate Ballpark Range</button>
          <p class="tiny-note">
            By using this tool you agree this is an approximate range only and not a guaranteed quote or offer.
          </p>
        </form>

        <!-- RIGHT: RESULT / DISCLAIMERS -->
        <aside class="est-card est-result-card">
          <h3>Ballpark Range (Not a Formal Estimate)</h3>
          <div id="est-result">
            <p class="muted">
              Fill in the details on the left and weâ€™ll show a
              <strong>rough NYC-area range</strong> based on typical pricing for similar projects.
            </p>

            <!-- Gold framed info box -->
            <div style="
              border:1px solid rgba(231,191,99,0.45);
              padding:12px 14px;
              border-radius:10px;
              margin-top:12px;
              background:rgba(10,20,35,0.55);
              box-shadow:0 0 14px rgba(231,191,99,0.25);
            ">
              <ul class="bullets">
                <li>Uses NYC &amp; North Jersey cost ranges</li>
                <li>Includes setup, protection &amp; cleanup</li>
                <li>Adds buffer for access, parking &amp; logistics</li>
              </ul>
            </div>
          </div>

          <!-- Main disclaimer -->
          <div style="
            border:1px solid rgba(231,191,99,0.35);
            padding:12px 14px;
            border-radius:10px;
            margin-top:18px;
            background:rgba(7,14,26,0.75);
            font-size:11px;
            color:#bbb;
          ">
            <p>
              <strong>Important:</strong> This calculator is for
              <em>informational purposes only</em>. It does not account for all conditions, is <strong>not</strong> a bid,
              quote, or contract, and does not create any obligation for Hammer Brick &amp; Home LLC.
            </p>
          </div>

          <!-- NOT INCLUDED -->
          <div style="
            border:1px solid rgba(255,80,80,0.45);
            padding:12px 14px;
            border-radius:10px;
            margin-top:14px;
            background:rgba(40,10,10,0.45);
            color:#ffcccc;
            font-size:12px;
            line-height:1.45;
          ">
            <strong style="color:#ff9a9a;">What This Does NOT Include:</strong>
            <ul class="bullets" style="margin-top:6px;">
              <li>Architect / Engineer drawings or filing fees</li>
              <li>Structural, plumbing, or electrical upgrades</li>
              <li>Asbestos / mold remediation</li>
              <li>Major framing, leveling, or hidden damages</li>
              <li>Custom specialty / imported materials not selected</li>
              <li>Unexpected conditions discovered during demolition</li>
            </ul>
          </div>

          <!-- Final note -->
          <div style="
            border-left:3px solid var(--gold);
            padding:12px 14px;
            border-radius:8px;
            margin-top:14px;
            background:rgba(20,20,25,0.45);
            font-size:11px;
            color:var(--muted);
          ">
            Final pricing is only issued in a written estimate after a walkthrough
            and a detailed scope covering labor, materials, access, and any DOB filings.
          </div>
        </aside>
      </div>
    </section>
  </main>

  <!-- FOOTER INCLUDE -->
  <div id="footer-include"></div>

  <!-- HEADER/FOOTER LOADER -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      Promise.all([
        fetch("header.html").then(r => r.text()),
        fetch("footer.html").then(r => r.text())
      ])
      .then(([header, footer]) => {
        document.getElementById("header-include").innerHTML = header;
        document.getElementById("footer-include").innerHTML = footer;

        const yr = document.getElementById("yr");
        if (yr) yr.textContent = new Date().getFullYear();
      })
      .catch(err => console.error("Include load error", err));
    });
  </script>

  <!-- ADVANCED ESTIMATOR LOGIC -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const form        = document.getElementById("est-form");
      if (!form) return;

      const serviceEl   = document.getElementById("est-service");
      const boroughEl   = document.getElementById("est-borough");
      const buildingEl  = document.getElementById("est-building");
      const sizeRow     = document.getElementById("est-size-row");
      const sizeLabel   = document.getElementById("est-size-label");
      const sizeInput   = document.getElementById("est-size");
      const scopeRow    = document.getElementById("est-scope-row");
      const scopeSelect = document.getElementById("est-scope");
      const finishEl    = document.getElementById("est-finish");
      const urgencyEl   = document.getElementById("est-urgency");
      const leadEl      = document.getElementById("est-lead");
      const dumpsterEl  = document.getElementById("est-dumpster");
      const demoEl      = document.getElementById("est-demo");
      const permitEl    = document.getElementById("est-permit");
      const resultBox   = document.getElementById("est-result");

      // Advanced groups
      const advMasonry  = document.getElementById("adv-masonry");
      const advRoof     = document.getElementById("adv-roof");
      const advSiding   = document.getElementById("adv-siding");
      const advWindows  = document.getElementById("adv-windows");
      const advStyle    = document.getElementById("adv-style");

      const masonryFocusEl = document.getElementById("masonry-focus");
      const driveExistingEl = document.getElementById("drive-existing");
      const driveRemoveEl   = document.getElementById("drive-remove");
      const driveAccessEl   = document.getElementById("drive-access");

      const roofTearoffEl = document.getElementById("roof-tearoff");
      const roofPitchEl   = document.getElementById("roof-pitch");
      const roofHeightEl  = document.getElementById("roof-height");

      const sidingRemoveEl  = document.getElementById("siding-remove");
      const sidingStoriesEl = document.getElementById("siding-stories");

      const windowCountEl  = document.getElementById("window-count");
      const doorCountEl    = document.getElementById("door-count");
      const windowBrandEl  = document.getElementById("window-brand");
      const windowStyleEl  = document.getElementById("window-style");

      const designStyleEl  = document.getElementById("design-style");

      // NYC-leaning ranges (built from national guides + bumped for NYC/North Jersey)
      const SERVICE_CONFIG = {
        "masonry": {
          mode: "area",
          label: "Approx. masonry / paver area (sq. ft.)",
          minArea: 60,
          maxArea: 2000,
          perSqLow: 25,
          perSqHigh: 45,
          minLow: 3500,
          minHigh: 7500,
          leadSensitive: false
        },
        "driveway": {
          mode: "area",
          label: "Driveway / parking area (sq. ft.)",
          minArea: 250,
          maxArea: 4000,
          perSqLow: 18,
          perSqHigh: 38,
          minLow: 5500,
          minHigh: 18000,
          leadSensitive: false
        },
        "interior-paint": {
          mode: "area",
          label: "Approx. interior floor area (sq. ft.)",
          minArea: 250,
          maxArea: 4000,
          perSqLow: 5,
          perSqHigh: 12,
          minLow: 3000,
          minHigh: 15000,
          leadSensitive: true
        },
        "exterior-paint": {
          mode: "area",
          label: "Approx. exterior wall area (sq. ft.)",
          minArea: 400,
          maxArea: 5000,
          perSqLow: 4.5,
          perSqHigh: 9.5,
          minLow: 3500,
          minHigh: 9000,
          leadSensitive: true
        },
        "bathroom": {
          mode: "scope",
          leadSensitive: true,
          scopes: {
            "refresh": {
              label: "Light refresh (keep layout & fixtures)",
              low: 25000,
              high: 40000
            },
            "mid": {
              label: "Mid-level upgrade (some layout / tile changes)",
              low: 40000,
              high: 65000
            },
            "gut": {
              label: "Full gut with luxury finishes",
              low: 65000,
              high: 110000
            }
          }
        },
        "kitchen": {
          mode: "scope",
          leadSensitive: true,
          scopes: {
            "refresh": {
              label: "Cosmetic refresh (paint, backsplash, hardware)",
              low: 30000,
              high: 55000
            },
            "mid": {
              label: "Mid-level remodel (cabinets + surfaces)",
              low: 55000,
              high: 95000
            },
            "gut": {
              label: "Full gut / high-end kitchen",
              low: 95000,
              high: 180000
            }
          }
        },
        "basement": {
          mode: "area",
          label: "Approx. finished basement area (sq. ft.)",
          minArea: 400,
          maxArea: 2000,
          perSqLow: 45,
          perSqHigh: 120,
          minLow: 25000,
          minHigh: 75000,
          leadSensitive: true
        },
        "deck": {
          mode: "area",
          label: "Approx. deck / patio area (sq. ft.)",
          minArea: 120,
          maxArea: 1200,
          perSqLow: 40,
          perSqHigh: 85,
          minLow: 6000,
          minHigh: 20000,
          leadSensitive: false
        },
        "fence": {
          mode: "scope",
          leadSensitive: false,
          scopes: {
            "yard": {
              label: "Standard run (approx. 50â€“120 ft)",
              low: 3500,
              high: 8500
            },
            "corner": {
              label: "Corner / larger yard (120â€“220 ft)",
              low: 8500,
              high: 16000
            },
            "premium": {
              label: "Premium/custom fence or multiple gates",
              low: 16000,
              high: 28000
            }
          }
        },
        "roofing": {
          mode: "area",
          label: "Roof area (sq. ft. of deck)",
          minArea: 700,
          maxArea: 5000,
          perSqLow: 6.5,
          perSqHigh: 14.5,
          minLow: 8500,
          minHigh: 28000,
          leadSensitive: false
        },
        "siding": {
          mode: "area",
          label: "Wall area to side (sq. ft.)",
          minArea: 600,
          maxArea: 4500,
          perSqLow: 9,
          perSqHigh: 22,
          minLow: 9000,
          minHigh: 38000,
          leadSensitive: false
        },
        "windows": {
          mode: "area",
          label: "Total openings (windows + doors count)",
          minArea: 3,
          maxArea: 40,
          perSqLow: 950,
          perSqHigh: 2200,
          minLow: 6000,
          minHigh: 65000,
          leadSensitive: false
        },
        "handyman": {
          mode: "scope",
          leadSensitive: false,
          scopes: {
            "small": {
              label: "Small visit (up to 2 hours)",
              low: 350,
              high: 550
            },
            "halfday": {
              label: "Half day (up to 4 hours)",
              low: 550,
              high: 850
            },
            "fullday": {
              label: "Full day (up to 8 hours)",
              low: 850,
              high: 1400
            }
          }
        }
      };

      const BOROUGH_FACTOR = {
        "staten-island": 1.00,
        "brooklyn": 1.10,
        "queens": 1.08,
        "bronx": 1.05,
        "manhattan": 1.20,
        "nj": 1.05
      };

      const BUILDING_FACTOR = {
        "house": 1.00,
        "small-multi": 1.08,
        "coop-condo": 1.15,
        "mixed": 1.20
      };

      const FINISH_FACTOR = {
        "standard": 1.00,
        "premium": 1.15,
        "luxury": 1.30
      };

      const FINISH_LABEL = {
        "standard": "Standard",
        "premium": "Premium",
        "luxury": "Luxury"
      };

      const URGENCY_FACTOR = {
        "flex": 1.00,
        "soon": 1.07,
        "rush": 1.15
      };

      const URGENCY_LABEL = {
        "flex": "Flexible (2â€“3+ months)",
        "soon": "Soon (4â€“8 weeks)",
        "rush": "Rush (< 4 weeks)"
      };

      const SERVICE_LABEL = {
        "masonry": "Masonry Â· Pavers Â· Concrete",
        "driveway": "Driveway / Parking Area",
        "interior-paint": "Interior Painting",
        "exterior-paint": "Exterior Facade / Painting",
        "bathroom": "Bathroom Remodel",
        "kitchen": "Kitchen Remodel",
        "basement": "Basement Finishing",
        "deck": "Deck / Patio Build or Rebuild",
        "fence": "Fence Install / Replacement",
        "roofing": "Roofing â€“ Shingle / Flat",
        "siding": "Siding â€“ Exterior",
        "windows": "Windows & Exterior Doors",
        "handyman": "Small Repairs / Handyman Visit"
      };

      function formatMoney(num){
        return "$" + Math.round(num).toLocaleString("en-US");
      }

      function rebuildScopeOptions(cfg){
        scopeSelect.innerHTML = '<option value="">Select scopeâ€¦</option>';
        if (!cfg.scopes) return;
        Object.entries(cfg.scopes).forEach(([value, sc]) => {
          const opt = document.createElement("option");
          opt.value = value;
          opt.textContent = sc.label;
          scopeSelect.appendChild(opt);
        });
      }

      function resetAdvanced(){
        advMasonry.style.display = "none";
        advRoof.style.display    = "none";
        advSiding.style.display  = "none";
        advWindows.style.display = "none";
        advStyle.style.display   = "none";
      }

      function updateVisibility(){
        const svc = serviceEl.value;
        const cfg = SERVICE_CONFIG[svc];
        if (!cfg) return;

        // base area/scope visibility
        if (cfg.mode === "area"){
          sizeRow.style.display  = "";
          scopeRow.style.display = "none";
          sizeLabel.textContent  = cfg.label || "Approx. size (sq. ft.)";
        } else if (cfg.mode === "scope"){
          sizeRow.style.display  = "none";
          scopeRow.style.display = "";
          rebuildScopeOptions(cfg);
        } else {
          sizeRow.style.display  = "";
          scopeRow.style.display = "";
          sizeLabel.textContent  = cfg.label || "Approx. size (sq. ft.)";
          rebuildScopeOptions(cfg);
        }

        // advanced groups
        resetAdvanced();

        if (svc === "masonry" || svc === "driveway"){
          advMasonry.style.display = "";
        }
        if (svc === "roofing"){
          advRoof.style.display = "";
        }
        if (svc === "siding"){
          advSiding.style.display = "";
        }
        if (svc === "windows"){
          advWindows.style.display = "";
        }
        if (svc === "kitchen" || svc === "bathroom" || svc === "basement"){
          advStyle.style.display = "";
        }
      }

      function calculateEstimate(evt){
        evt.preventDefault();

        const svc = serviceEl.value;
        const cfg = SERVICE_CONFIG[svc];
        if (!cfg){
          resultBox.innerHTML = "<p>Choose a project type to begin.</p>";
          return;
        }

        let baseLow, baseHigh;
        let usedArea = null;
        let usedScopeLabel = "";

        if (cfg.mode === "area" || cfg.mode === "both"){
          let areaRaw = (sizeInput.value || "").toString().replace(/,/g,"");
          let area = parseFloat(areaRaw);
          if (isNaN(area) || area <= 0){
            resultBox.innerHTML = "<p>Please enter an approximate size (sq. ft. or openings).</p>";
            return;
          }
          const minArea = cfg.minArea || 1;
          const maxArea = cfg.maxArea || 5000;
          area = Math.max(minArea, Math.min(area, maxArea));
          usedArea = area;

          baseLow  = cfg.perSqLow  * area;
          baseHigh = cfg.perSqHigh * area;

          if (cfg.minLow  && baseLow  < cfg.minLow)  baseLow  = cfg.minLow;
          if (cfg.minHigh && baseHigh < cfg.minHigh) baseHigh = cfg.minHigh;
        } else if (cfg.mode === "scope"){
          const scopeVal = scopeSelect.value;
          const scopeCfg = cfg.scopes && cfg.scopes[scopeVal];
          if (!scopeCfg){
            resultBox.innerHTML = "<p>Please choose a scope level for this project type.</p>";
            return;
          }
          baseLow  = scopeCfg.low;
          baseHigh = scopeCfg.high;
          usedScopeLabel = scopeCfg.label;
        }

        const borough     = boroughEl.value;
        const boroughText = boroughEl.options[boroughEl.selectedIndex].textContent;
        const building    = buildingEl.value;
        const buildingText= buildingEl.options[buildingEl.selectedIndex].textContent;
        const finish      = finishEl.value;
        const urgency     = urgencyEl.value;
        const leadValue   = leadEl.value;

        let factor = 1;
        factor *= BOROUGH_FACTOR[borough]   || 1;
        factor *= BUILDING_FACTOR[building] || 1;
        factor *= FINISH_FACTOR[finish]     || 1;
        factor *= URGENCY_FACTOR[urgency]   || 1;

        // Lead factor
        if (leadValue === "yes" && cfg.leadSensitive){
          factor *= 1.10;
        }

        // Advanced: masonry / driveway extra
        if (svc === "masonry" || svc === "driveway"){
          const focus  = masonryFocusEl.value;
          const existing = driveExistingEl.value;
          const remove   = driveRemoveEl.value;
          const access   = driveAccessEl.value;

          if (focus === "driveway"){
            // driveways get a bit more base
            factor *= 1.05;
          }

          if (remove === "partial"){
            baseLow  += 1500;
            baseHigh += 2800;
          } else if (remove === "full"){
            baseLow  += 3500;
            baseHigh += 6500;
          }

          if (existing === "concrete"){
            baseLow  += 800;
            baseHigh += 1800;
          } else if (existing === "pavers"){
            baseLow  += 500;
            baseHigh += 1400;
          }

          if (access === "tight"){
            factor *= 1.06;
          } else if (access === "cityrow"){
            factor *= 1.12;
          }
        }

        // Advanced: roofing extra
        if (svc === "roofing"){
          const tear   = parseInt(roofTearoffEl.value,10) || 0;
          const pitch  = roofPitchEl.value;
          const height = roofHeightEl.value;

          if (tear === 1){
            factor *= 1.05;
          } else if (tear === 2){
            factor *= 1.12;
          } else if (tear >= 3){
            factor *= 1.20;
          }

          if (pitch === "steep"){
            factor *= 1.12;
          } else if (pitch === "low"){
            factor *= 0.97;
          }

          if (height === "mid"){
            factor *= 1.06;
          } else if (height === "high"){
            factor *= 1.15;
          }
        }

        // Advanced: siding extra
        if (svc === "siding"){
          const removeType = sidingRemoveEl.value;
          const stories    = sidingStoriesEl.value;

          if (removeType === "wood"){
            factor *= 1.08;
          } else if (removeType === "stucco"){
            factor *= 1.18;
          }

          if (stories === "3"){
            factor *= 1.12;
          }
        }

        // Advanced: windows / doors
        let openingsCount = usedArea;
        if (svc === "windows"){
          const winCount = parseInt(windowCountEl.value || "0",10);
          const doorCount = parseInt(doorCountEl.value || "0",10);
          openingsCount = Math.max(3, winCount + doorCount);

          // recompute base just to line up with total openings
          baseLow  = SERVICE_CONFIG["windows"].perSqLow  * openingsCount;
          baseHigh = SERVICE_CONFIG["windows"].perSqHigh * openingsCount;
          if (SERVICE_CONFIG["windows"].minLow  && baseLow  < SERVICE_CONFIG["windows"].minLow)  baseLow  = SERVICE_CONFIG["windows"].minLow;
          if (SERVICE_CONFIG["windows"].minHigh && baseHigh < SERVICE_CONFIG["windows"].minHigh) baseHigh = SERVICE_CONFIG["windows"].minHigh;

          const brand = windowBrandEl.value;
          const style = windowStyleEl.value;

          if (brand === "andersen"){
            factor *= 1.18;
          } else if (brand === "pella"){
            factor *= 1.16;
          } else if (brand === "builder"){
            factor *= 0.93;
          } // bella ~ baseline

          if (style === "modern"){
            factor *= 1.06;
          } else if (style === "italian"){
            factor *= 1.18;
          }

          // extra for exterior doors
          if (doorCount > 0){
            baseLow  += 2200 * doorCount;
            baseHigh += 3200 * doorCount;
          }
        }

        // Advanced: Italian / modern design style for kitchen / bath / basement
        if (svc === "kitchen" || svc === "bathroom" || svc === "basement"){
          const style = designStyleEl.value;
          if (style === "modern"){
            factor *= 1.07;
          } else if (style === "italian"){
            factor *= 1.18;
          }
        }

        // Apply factor
        let low  = baseLow  * factor;
        let high = baseHigh * factor;

        // add-ons
        const dumpsterVal = Number(dumpsterEl.value || 0);
        const demoVal     = Number(demoEl.value || 0);
        const permitVal   = Number(permitEl.value || 0);
        const addOnsTotal = dumpsterVal + demoVal + permitVal;

        low  += addOnsTotal;
        high += addOnsTotal;

        // widen range slightly for unknowns
        const softLow  = low  * 0.95;
        const softHigh = high * 1.12;

        const svcLabel       = SERVICE_LABEL[svc] || svc;
        const finishLabel    = FINISH_LABEL[finish] || finish;
        const urgencyLabel   = URGENCY_LABEL[urgency] || urgency;

        const bodyLines = [
          "Hello,",
          "",
          "Please send me a written estimate based on this ballpark from your website:",
          "",
          "Project Type: " + svcLabel,
          usedArea ? ("Approx. Size (sq ft or openings): " + usedArea) : "",
          usedScopeLabel ? ("Scope Level: " + usedScopeLabel) : "",
          "Location (Borough): " + boroughText,
          "Building Type: " + buildingText,
          "Finish Level: " + finishLabel,
          "Timeline: " + urgencyLabel,
          "Pre-1978 / Lead-Sensitive: " + (leadValue === "yes" ? "Yes / Unsure" : "No / Tested Negative or 1978+"),
          "",
          "Advanced Options Selected:"
        ];

        if (svc === "masonry" || svc === "driveway"){
          bodyLines.push(
            "  Masonry focus: " + masonryFocusEl.value,
            "  Existing driveway material: " + driveExistingEl.value,
            "  Removal level: " + driveRemoveEl.value,
            "  Access: " + driveAccessEl.value
          );
        }
        if (svc === "roofing"){
          bodyLines.push(
            "  Tear-off layers: " + roofTearoffEl.value,
            "  Roof pitch: " + roofPitchEl.value,
            "  Roof height: " + roofHeightEl.value
          );
        }
        if (svc === "siding"){
          bodyLines.push(
            "  Existing siding: " + sidingRemoveEl.value,
            "  Stories: " + sidingStoriesEl.value
          );
        }
        if (svc === "windows"){
          bodyLines.push(
            "  Window openings: " + (windowCountEl.value || ""),
            "  Exterior doors: " + (doorCountEl.value || ""),
            "  Window brand: " + windowBrandEl.value,
            "  Style: " + windowStyleEl.value
          );
        }
        if (svc === "kitchen" || svc === "bathroom" || svc === "basement"){
          bodyLines.push("  Design style: " + designStyleEl.value);
        }

        bodyLines.push(
          "",
          "Selected Add-Ons:",
          "  Dumpster: $" + dumpsterVal.toLocaleString("en-US"),
          "  Demolition: $" + demoVal.toLocaleString("en-US"),
          "  DOB Permit (approx): $" + permitVal.toLocaleString("en-US"),
          "",
          "Ballpark Range Shown:",
          "  " + formatMoney(softLow) + " â€“ " + formatMoney(softHigh),
          "",
          "My Contact Info:",
          "Name:",
          "Service Address:",
          "Phone:",
          "Email:",
          "",
          "Thank you!"
        );

        const mailtoHref = "mailto:Hammerbrickhome@gmail.com"
          + "?subject=" + encodeURIComponent("Estimate Request â€“ Website Tool")
          + "&body=" + encodeURIComponent(bodyLines.join("\n"));

        resultBox.innerHTML = `
          <p class="muted">NYC-area ballpark only â€” not a formal quote.</p>
          <p>Estimated range for this type of project:</p>
          <p class="est-main">${formatMoney(softLow)} â€“ ${formatMoney(softHigh)}</p>
          <p class="est-note">
            Most approved projects land somewhere in the middle of this range once we see
            access, existing conditions, and final finish choices.
          </p>
          <p class="muted" style="margin-bottom:10px;">
            <strong>Assumptions:</strong>
            ${boroughText} Â· ${buildingText} Â· ${finishLabel} finish Â· ${urgencyLabel}.
          </p>
          <ul class="bullets">
            <li>Includes a buffer for typical NYC access, protection, and cleanup.</li>
            <li>Approximate add-ons included in this range: <strong>${formatMoney(addOnsTotal)}</strong> (dumpster, demo, permit).</li>
            <li>Does <strong>not</strong> include architect/engineer fees, major structural/MEP changes, or unforeseen conditions.</li>
            <li>Final pricing is only confirmed in a written estimate after a walkthrough.</li>
          </ul>
          <a class="btn-email-est" href="${mailtoHref}">ðŸ“§ Email me this estimate</a>
          <a class="btn" style="margin-left:6px;margin-top:10px;" href="contact.html">Book a walkthrough for an exact quote</a>
        `;
      }

      serviceEl.addEventListener("change", updateVisibility);
      form.addEventListener("submit", calculateEstimate);

      updateVisibility();
    });
  </script>

  <script src="script.js"></script>
</body>
</html>
